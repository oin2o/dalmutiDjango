<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no" />
    <title>Liar Game</title>
    <style>
        table{
            width: 95%;
        }
        .td6{
            font-size: 0.67em;
            margin-left: 0;
            margin-right: 0;
        }
        .td6c{
            text-align:center;
            font-size: 0.67em;
            margin-left: 0;
            margin-right: 0;
        }
        .tdh6{
            font-size: 0.67em;
            margin-left: 0;
            margin-right: 0;
            font-weight: bold;
        }
        .tdh6c{
            text-align:center;
            font-size: 0.67em;
            margin-left: 0;
            margin-right: 0;
            font-weight: bold;
        }
    </style>
    <script type="text/javascript">
    // í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì˜ ì›¹ì†Œì¼“ í†µì‹ ì„ ê°€ëŠ¥í•˜ë„ë¡ ì—°ê²°ì‹œì¼œì£¼ëŠ” ë¶€ë¶„ì´ë‹¤.
    // router.pyì—ì„œì˜ urlê³¼ ì¼ì¹˜í•˜ë„ë¡ í•´ ì£¼ì–´ì•¼í•œë‹¤.
    var web_socket = new WebSocket('ws://' + window.location.host + '/liar/' + '{{ gamer.game.gamecode }}' + '/' + '{{ gamer.user.username }}');

    // onmessageëŠ” counsumersì—ì„œ ë³´ë‚´ëŠ” ë©”ì„¸ì§€ë¥¼ ë°›ëŠ” ë¶€ë¶„ì´ë‹¤.
    web_socket.onmessage = function(e) {
        var data = JSON.parse(e.data);
        var message = data['message'];

        if (message == 'refresh') {
            setTimeout(function(){
                document.location.href = "{% url 'liar:game' gamer.game.gamecode gamer.user.username %}";
            }, 500);
        }
    };

    function readygame() {
        id_action.value = "readygame";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function viewgame() {
        id_action.value = "viewgame";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function startgame() {
        id_action.value = "startgame";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function votegame() {
        swal("ë°œì–¸ì„ ì¢…ë£Œí•˜ê³  ë¼ì´ì–´ë¥¼ ê²€ê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?", {
            dangerMode: true,
            buttons: ["ì·¨ì†Œ", "íˆ¬í‘œ"],
        }).then((isConfirm) => {
            if(isConfirm) {
                id_action.value = "votegame";
                document.forms['gameform'].submit();

                web_socket.send(JSON.stringify({
                    'message': 'refresh'
                }));
            } else {
                swal("ë°œì–¸ì„ ê³„ì†í•©ë‹ˆë‹¤.");
            }
        });
    }

    function liargame() {
        id_action.value = "liargame";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function resultgame() {
        swal("ì „ì ì„ ì €ì¥í•˜ì§€ ì•Šê³  ê²°ê³¼ë§Œ ë³´ì‹œê² ìŠµë‹ˆê¹Œ?", {
            dangerMode: true,
            buttons: ["ì·¨ì†Œ", "ê²°ê³¼í™•ì¸"],
        }).then((isConfirm) => {
            if(isConfirm) {
                id_action.value = "resultgame";
                document.forms['gameform'].submit();

                web_socket.send(JSON.stringify({
                    'message': 'refresh'
                }));
            }
        });
    }

    function endgame() {
        id_action.value = "endgame";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function gamecategory(categoryname) {
        id_action.value = "gamecategory";
        id_categoryname.value = categoryname;
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function trickster(tricksterYn) {
        let btn_text = "ì¶”ê°€";
        let danger_mode = false;
        if(tricksterYn == "True") {
            btn_text = "ì œì™¸";
            danger_mode = true;
        }
        swal("ë‚˜ëŠ” ë‚˜ëŠ” ì‚¬ê¸°ê¾¼~ğŸ¶", "ì†Œì†: ë¼ì´ì–´\níŠ¹ìˆ˜: ì œì‹œì–´ë¥¼ ì•Œê³  ìˆìŠµë‹ˆë‹¤.\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ë„ì™€ì£¼ì„¸ìš”.\n2. ì‹œë¯¼ì—ê²Œ ì •ì²´ë¥¼ ë“¤í‚¤ì§€ ë§ˆì„¸ìš”.", {
            dangerMode: danger_mode,
            buttons: ["ì·¨ì†Œ", btn_text],
        }).then((isConfirm) => {
            if(isConfirm) {
                id_action.value = "trickster";
                document.forms['gameform'].submit();

                web_socket.send(JSON.stringify({
                    'message': 'refresh'
                }));
            }
        });
    }

    function whistleblower(whistleblowerYn) {
        let btn_text = "ì¶”ê°€";
        let danger_mode = false;
        if(whistleblowerYn == "True") {
            btn_text = "ì œì™¸";
            danger_mode = true;
        }
        swal("ë¼ì´ì–´ê°€ ëˆ„êµ¬ëƒë©´? ì‰¿~ğŸ¤«", "ì†Œì†: ì‹œë¯¼\níŠ¹ìˆ˜: ë¼ì´ì–´ì™€ ì œì‹œì–´ë¥¼ ì•Œê³  ìˆìŠµë‹ˆë‹¤.\n\nëª©í‘œ\n1. ë¼ì´ì–´ì™€ ì‚¬ê¸°ê¾¼ì„ ì°¾ìœ¼ì„¸ìš”.\n2. ë¼ì´ì–´ì—ê²Œ ì •ì²´ë¥¼ ë“¤í‚¤ì§€ ë§ˆì„¸ìš”.", {
            dangerMode: danger_mode,
            buttons: ["ì·¨ì†Œ", btn_text],
        }).then((isConfirm) => {
            if(isConfirm) {
                id_action.value = "whistleblower";
                document.forms['gameform'].submit();

                web_socket.send(JSON.stringify({
                    'message': 'refresh'
                }));
            }
        });

    }

    function descjob(job) {
        let desc = "";
        if(job == 'citizen') {
            desc += "ì†Œì†: ì‹œë¯¼\níŠ¹ìˆ˜: ì œì‹œì–´ë¥¼ ì•Œê³  ìˆìŠµë‹ˆë‹¤.";
            if('{{ gamer.game.tricksterYn }}' == 'True') {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ì™€ ì‚¬ê¸°ê¾¼ì„ ì°¾ìœ¼ì„¸ìš”.";
            } else  {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ì°¾ìœ¼ì„¸ìš”.";
            }
            if('{{ gamer.game.whistleblowerYn }}' == 'True') {
                desc += "\n2. ë‚´ë¶€ê³ ë°œì(ë°°ì‹ ì)ë¥¼ ë³´í˜¸í•˜ì„¸ìš”.";
            }
            swal("ë‚˜ ì§„ì§œ ì‹œë¯¼ì´ë¼ê³ ~â˜ ", desc, {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'liar') {
            desc += "ì†Œì†: ë¼ì´ì–´\n\nëª©í‘œ\n1. ì œì‹œì–´ë¥¼ ìœ ì¶”í•˜ì„¸ìš”.";
            if('{{ gamer.game.whistleblowerYn }}' == 'True') {
                desc += "\n2. ë°°ì‹ ì(ë‚´ë¶€ê³ ë°œì)ë¥¼ ì°¾ìœ¼ì„¸ìš”.";
            }
            swal("I am a Liar~ğŸ‘»", desc , {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'trickster') {
            desc += "ì†Œì†: ë¼ì´ì–´\níŠ¹ìˆ˜: ì œì‹œì–´ë¥¼ ì•Œê³  ìˆìŠµë‹ˆë‹¤.\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ë„ì™€ì£¼ì„¸ìš”.\n2. ì‹œë¯¼ì—ê²Œ ì •ì²´ë¥¼ ë“¤í‚¤ì§€ ë§ˆì„¸ìš”.";
            swal("ë‚˜ëŠ” ë‚˜ëŠ” ì‚¬ê¸°ê¾¼~ğŸ¶", desc, {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'whistleblower') {
            desc += "ì†Œì†: ì‹œë¯¼\níŠ¹ìˆ˜: ë¼ì´ì–´ì™€ ì œì‹œì–´ë¥¼ ì•Œê³  ìˆìŠµë‹ˆë‹¤.";
            if('{{ gamer.game.tricksterYn }}' == 'True') {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ì™€ ì‚¬ê¸°ê¾¼ì„ ì°¾ìœ¼ì„¸ìš”.";
            } else  {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ì°¾ìœ¼ì„¸ìš”.";
            }
            desc += "\n2. ë¼ì´ì–´ì—ê²Œ ì •ì²´ë¥¼ ë“¤í‚¤ì§€ ë§ˆì„¸ìš”.";
            swal("ë¼ì´ì–´ê°€ ëˆ„êµ¬ëƒë©´? ì‰¿~ğŸ¤«", desc, {
                buttons: false,
                timer: 2000,
            });
        }
    }

    function info(job) {
        let desc = "";
        if(job == 'citizen') {
            desc += "ì†Œì†: ì‹œë¯¼\n\nì¹´í…Œê³ ë¦¬: " + '{{ gamer.game.categoryname }}' + "\nì œì‹œì–´: " + '{{ gamer.game.word }}';
            if('{{ gamer.game.tricksterYn }}' == 'True') {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ì™€ ì‚¬ê¸°ê¾¼ì„ ì°¾ìœ¼ì„¸ìš”.";
            } else  {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ì°¾ìœ¼ì„¸ìš”.";
            }
            if('{{ gamer.game.whistleblowerYn }}' == 'True') {
                desc += "\n2. ë‚´ë¶€ê³ ë°œì(ë°°ì‹ ì)ë¥¼ ë³´í˜¸í•˜ì„¸ìš”.";
            }
            swal("ë‚˜ ì§„ì§œ ì‹œë¯¼ì´ë¼ê³ ~â˜ ", desc, {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'liar') {
            desc += "ì†Œì†: ë¼ì´ì–´\n\nì¹´í…Œê³ ë¦¬: " + '{{ gamer.game.categoryname }}' + "\n\nëª©í‘œ\n1. ì œì‹œì–´ë¥¼ ìœ ì¶”í•˜ì„¸ìš”.";
            if('{{ gamer.game.whistleblowerYn }}' == 'True') {
                desc += "\n2. ë°°ì‹ ì(ë‚´ë¶€ê³ ë°œì)ë¥¼ ì°¾ìœ¼ì„¸ìš”.";
            }
            swal("I am a Liar~ğŸ‘»", desc, {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'trickster') {
            desc += "ì†Œì†: ë¼ì´ì–´\n\nì¹´í…Œê³ ë¦¬: " + '{{ gamer.game.categoryname }}' + "\nì œì‹œì–´: " + '{{ gamer.game.word }}' + "\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ë„ì™€ì£¼ì„¸ìš”.\n2. ì‹œë¯¼ì—ê²Œ ì •ì²´ë¥¼ ë“¤í‚¤ì§€ ë§ˆì„¸ìš”.";
            swal("ë‚˜ëŠ” ë‚˜ëŠ” ì‚¬ê¸°ê¾¼~ğŸ¶", desc, {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'whistleblower') {
            desc += "ì†Œì†: ì‹œë¯¼\n\nì¹´í…Œê³ ë¦¬: " + '{{ gamer.game.categoryname }}' + "\nì œì‹œì–´: " + '{{ gamer.game.word }}' + "\në¼ì´ì–´: " + '{{ liar.user.username }}';
            if('{{ gamer.game.tricksterYn }}' == 'True') {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ì™€ ì‚¬ê¸°ê¾¼ì„ ì°¾ìœ¼ì„¸ìš”.";
            } else  {
                desc += "\n\nëª©í‘œ\n1. ë¼ì´ì–´ë¥¼ ì°¾ìœ¼ì„¸ìš”.";
            }
            desc += "\n2. ë¼ì´ì–´ì—ê²Œ ì •ì²´ë¥¼ ë“¤í‚¤ì§€ ë§ˆì„¸ìš”.";
            swal("ë¼ì´ì–´ê°€ ëˆ„êµ¬ëƒë©´? ì‰¿~ğŸ¤«", desc, {
                buttons: false,
                timer: 2000,
            });
        } else if(job == 'observer') {
            desc += "ì¹´í…Œê³ ë¦¬: " + '{{ gamer.game.categoryname }}' + "\nì œì‹œì–´: " + '{{ gamer.game.word }}' + "\në¼ì´ì–´: " + '{{ liar.user.username }}';
            swal("ê·¸ëƒ¥ ë³´ê³ ë§Œ ìˆì„ê²Œ~ğŸ™", desc, {
                buttons: false,
                timer: 2000,
            });
        }
    }

    function speech() {
        swal("ì œì‹œì–´ì— ë”°ë¼ ë°œì–¸ì„ í•´ì£¼ì„¸ìš”.", {
            content: {
                element: "input",
                attributes: {
                    type: "text",
                    maxlength: 100,
                    placeholder: "ë‚´ìš©",
                },
            },
            buttons: ["ì·¨ì†Œ", "ë§í•˜ê¸°"],
        }).then(function(response) {
            if(response != null && response != '') {
                id_speech.value = response;
                id_action.value = "speech";
                document.forms['gameform'].submit();

                web_socket.send(JSON.stringify({
                    'message': 'refresh'
                }));
            }
        });
    }

    function saying(speech) {
        swal(speech, {
                buttons: false,
                timer: 2000,
            });
    }

    function sayingall() {
        swal( "ë„ˆ ì§€ê¸ˆ ë­ë¼í–ˆëƒ?", ""
        {% for ready_gamer in ready_gamers %}
            {% if ready_gamer.speech1 %}
             + "\n" + '{{ ready_gamer.user.username }}' + ": " + '{{ ready_gamer.speech1 }}'
            {% endif %}
        {% endfor %}
        {% for ready_gamer in ready_gamers %}
            {% if ready_gamer.speech2 %}
             + "\n" + '{{ ready_gamer.user.username }}' + ": " + '{{ ready_gamer.speech2 }}'
            {% endif %}
        {% endfor %}
        );
    }

    function whoistarget(target) {
        id_vote.value = target;
        id_action.value = "vote";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function votetarget(target) {
        id_targetusername.value = target;
        id_action.value = "target";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function runawaylock(lock) {
        id_lock.value = lock;
        id_action.value = "lock";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function killtarget(target) {
        id_lock.value = 'whistleblower';
        id_key.value = target;
        id_action.value = "runaway";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }

    function killword(target) {
        id_lock.value = 'word';
        id_key.value = target;
        id_action.value = "runaway";
        document.forms['gameform'].submit();

        web_socket.send(JSON.stringify({
            'message': 'refresh'
        }));
    }
    </script>
</head>
<body>
{% include "./menu.html" %}
{% load static %}
{% load liar_tags %}
<form name="gameform" action="{% url 'liar:game' gamer.game.gamecode gamer.user.username %}" method="post">
    {% csrf_token %}
    <input type="hidden" name="action" id="id_action"/>
    <input type="hidden" name="categoryname" id="id_categoryname"/>
    <input type="hidden" name="speech" id="id_speech"/>
    <input type="hidden" name="vote" id="id_vote"/>
    <input type="hidden" name="targetusername" id="id_targetusername"/>
    <input type="hidden" name="lock" id="id_lock"/>
    <input type="hidden" name="key" id="id_key"/>
</form>
<div id="play_msg" style="text-align:center;">
    {% if gamer.game.ingameCd == 0 %}
    <p class="text-warning">ëŒ€ê¸° ì¤‘ì¸ í”Œë ˆì´ì–´ë“¤ì€ ì°¸ê°€ í˜¹ì€ ê´€ì „ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
    {% elif gamer.game.ingameCd == 1 %}
    <p class="text-warning">í”Œë ˆì´ì–´ë“¤ì€ ì œì‹œì–´ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
    {% elif gamer.game.ingameCd == 2 %}
    <p class="text-warning">{{ gamer.game.turnusername }}ë‹˜, ì œì‹œì–´ì— ë”°ë¼ ë°œì–¸ì„ í•´ì£¼ì„¸ìš”.</p>
    {% elif gamer.game.ingameCd == 3 %}
        {% if gamer.game.vote == 0 %}
    <p class="text-warning">í”Œë ˆì´ì–´ë“¤ì€ ê²€ê±° ëŒ€ìƒì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
        {% else %}
    <p class="text-warning">ì˜ì‹¬ê°€ëŠ” í”Œë ˆì´ì–´ì—ê²Œ íˆ¬í‘œí•˜ì„¸ìš”.</p>
        {% endif %}
    {% elif gamer.game.ingameCd == 4 %}
    <p class="text-warning">ë¼ì´ì–´({{ liar.user.username }})ê°€ ë„ì£¼ë¥¼ ì‹œë„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
    {% elif gamer.game.ingameCd == 5 %}
    <p class="text-warning">ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
    {% endif %}
</div>
<p style="text-indent: 0.5em;">
    <div id="play_btn">
        <table style="margin-left: auto;margin-right: auto;">
            <tr>
                <td>
                    <a href="{% url 'liar:game' gamer.game.gamecode gamer.user.username %}"><button type="button" class="btn btn-outline-info" style="height:25px;padding-top:initial;padding-bottom:initial;">ìƒˆë¡œê³ ì¹¨</button></a>
                    {% if gamer.game.ingameCd == 0 %}
                        {% if gamer.status != 1 %}
                    <button type="button" onclick="readygame()" class="btn btn-outline-info" style="height:25px;padding-top:initial;padding-bottom:initial;">ì°¸ê°€</button></a>
                        {% endif %}
                        {% if gamer.status != 2 %}
                    <button type="button" onclick="viewgame()" class="btn btn-outline-info" style="height:25px;padding-top:initial;padding-bottom:initial;">êµ¬ê²½</button></a>
                        {% endif %}
                    {% endif %}
                    {% if gamer.user.username == gamer.game.master.username %}
                        {% if gamer.game.ingameCd == 0 and not wait_gamers and ready_gamers|length > 3 %}
                    <button type="button" onclick="startgame()" class="btn btn-outline-primary" style="height:25px;padding-top:initial;padding-bottom:initial;">ê²Œì„ì‹œì‘</button></a>
                        {% elif gamer.game.ingameCd == 2 %}
                    <button type="button" onclick="votegame()" class="btn btn-outline-primary" style="height:25px;padding-top:initial;padding-bottom:initial;">íˆ¬í‘œ</button></a>
                        {% elif gamer.game.ingameCd == 3 %}
                    <button type="button" onclick="liargame()" class="btn btn-outline-primary" style="height:25px;padding-top:initial;padding-bottom:initial;">ë§ˆì§€ë§‰ì„ íƒ</button></a>
                        {% elif gamer.game.ingameCd == 4 %}
                    <button type="button" onclick="resultgame()" class="btn btn-outline-primary" style="height:25px;padding-top:initial;padding-bottom:initial;">ê²°ê³¼í™•ì¸</button></a>
                        {% elif gamer.game.ingameCd == 5 %}
                    <button type="button" onclick="endgame()" class="btn btn-outline-primary" style="height:25px;padding-top:initial;padding-bottom:initial;">ê²Œì„ì¢…ë£Œ</button></a>
                        {% endif %}
                    {% endif %}
                </td>
                <td class="tdh6" style="text-align:right;">
                {% if gamer.game.ingameCd == 0 %}
                    by <a href="{% url 'liar:telegram' gamer.game.gamecode gamer.user.username %}">{{ gamer.game.gamecode }}</a>
                {% else %}
                    Round : {{ gamer.game.round }} by {{ gamer.game.gamecode }}
                {% endif %}
                </td>
            </tr>
        </table>
    </div>
</p>
<div id="gamer_jobs">
    <table style="margin-left: auto;margin-right: auto;">
        <tbody>
            <tr>
                <td class="tdh6" scope="row" style="width: 10%;">
                    ì§ì—…
                </td>
                <td class="td6" scope="row">
                    <button type="button" onclick="descjob('citizen')" class="btn btn-outline-warning disabled" style="height:20px;padding-top:initial;padding-bottom:initial;">ì‹œë¯¼</button>
                </td>
                <td class="td6" scope="row">
                    <button type="button" onclick="descjob('liar')" class="btn btn-outline-warning disabled" style="height:20px;padding-top:initial;padding-bottom:initial;">ë¼ì´ì–´</button>
                </td>
                <td class="td6" scope="row">
                {% if gamer.game.tricksterYn %}
                    {% if gamer.game.ingameCd == 0 and gamer.user.username == gamer.game.master.username %}
                    <button type="button" onclick="trickster('{{ gamer.game.tricksterYn }}')" class="btn btn-outline-warning" style="height:20px;padding-top:initial;padding-bottom:initial;">ì‚¬ê¸°ê¾¼</button>
                    {% else %}
                    <button type="button" onclick="descjob('trickster')" class="btn btn-outline-warning disabled" style="height:20px;padding-top:initial;padding-bottom:initial;">ì‚¬ê¸°ê¾¼</button>
                    {% endif %}
                {% elif gamer.game.ingameCd == 0 and gamer.user.username == gamer.game.master.username %}
                    <button type="button" onclick="trickster('{{ gamer.game.tricksterYn }}')" class="btn btn-outline-danger" style="height:20px;padding-top:initial;padding-bottom:initial;">ì‚¬ê¸°ê¾¼</button>
                {% endif %}
                </td>
                <td class="td6" scope="row">
                {% if gamer.game.whistleblowerYn %}
                    {% if gamer.game.ingameCd == 0 and gamer.user.username == gamer.game.master.username %}
                    <button type="button" onclick="whistleblower('{{ gamer.game.whistleblowerYn }}')" class="btn btn-outline-warning" style="height:20px;padding-top:initial;padding-bottom:initial;">ë‚´ë¶€ê³ ë°œì</button>
                    {% else %}
                    <button type="button" onclick="descjob('whistleblower')" class="btn btn-outline-warning disabled" style="height:20px;padding-top:initial;padding-bottom:initial;">ë‚´ë¶€ê³ ë°œì</button>
                    {% endif %}
                {% elif gamer.game.ingameCd == 0 and gamer.user.username == gamer.game.master.username %}
                    <button type="button" onclick="whistleblower('{{ gamer.game.whistleblowerYn }}')" class="btn btn-outline-danger" style="height:20px;padding-top:initial;padding-bottom:initial;">ë‚´ë¶€ê³ ë°œì</button>
                {% endif %}
                </td>
            </tr>
        </tbody>
    </table>
</div>
{% if wait_gamers %}
<div id="gamer_wait">
    <table style="margin-left: auto;margin-right: auto;">
        <tbody>
            <tr>
                <td class="tdh6" scope="row" style="width: 10%;">
                    ëŒ€ê¸°
                </td>
                <td class="td6" scope="row">
                    {% for wait_gamer in wait_gamers %}
                    <button type="button" class="btn btn-outline-dark disabled" style="height:20px;padding-top:initial;padding-bottom:initial;">{{ wait_gamer.user.username }}</button>
                    {% endfor %}
                </td>
            </tr>
        </tbody>
    </table>
</div>
{% endif %}
{% if view_gamers %}
<div id="gamer_view">
    <table style="margin-left: auto;margin-right: auto;">
        <tbody>
            <tr>
                <td class="tdh6" scope="row" style="width: 10%;">
                    ê´€ì „
                </td>
                <td class="td6" scope="row">
                    {% for view_gamer in view_gamers %}
                    <button type="button" class="btn btn-outline-secondary disabled" style="height:20px;padding-top:initial;padding-bottom:initial;">{{ view_gamer.user.username }}</button>
                    {% endfor %}
                </td>
            </tr>
        </tbody>
    </table>
</div>
{% endif %}
{% if ready_gamers %}
<p style="text-indent: 0.5em;">
    <div id="player">
        <table style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
                    <td class="tdh6c" scope="row">í”Œë ˆì´ì–´</td>
                    {% if gamer.game.ingameCd == 5 %}
                    <td class="tdh6c" scope="row">ì •ì²´</td>
                    {% else %}
                    <td class="tdh6c" scope="row">ìƒíƒœ</td>
                    {% endif %}
                    {% if gamer.game.ingameCd > 1 and ready_gamers.0.speech1 %}
                    <td class="tdh6c" scope="row">ë°œì–¸</td>
                    {% endif %}
                    <td class="tdh6c" scope="row" style="width: 40%;">ì •ë³´</td>
                </tr>
            </thead>
            <tbody>
                {% for ready_gamer in ready_gamers %}
                <tr>
                    <td class="td6c" scope="row">{{ ready_gamer.user.username }}</td>
                    {% if gamer.game.ingameCd == 5 %}
                    <td class="td6c" scope="row">
                        {% if ready_gamer.job == 'citizen' %}
                        ì‹œë¯¼
                        {% elif ready_gamer.job == 'liar' %}
                        <b style='color:red !important;'>ë¼ì´ì–´</b>
                        {% elif ready_gamer.job == 'trickster' %}
                        <b style='color:orange !important;'>ì‚¬ê¸°ê¾¼</b>
                        {% elif ready_gamer.job == 'whistleblower' %}
                        <b style='color:blue !important;'>ë‚´ë¶€ê³ ë°œì</b>
                        {% endif %}
                    </td>
                    {% else %}
                    <td class="td6c" scope="row">
                        {% if gamer.game.ingameCd == 0 %}
                        ì°¸ê°€
                        {% elif gamer.game.ingameCd == 1 %}
                            {% if ready_gamer.categoryname %}
                        ì™„ë£Œ
                            {% else %}
                        ì„ íƒì¤‘
                            {% endif %}
                        {% elif gamer.game.ingameCd == 2 %}
                            {% if ready_gamer.user.username == gamer.game.turnusername %}
                                {% if gamer.user.username == gamer.game.turnusername %}
                        <button type="button" onclick="speech()" class="btn btn-outline-danger btn-sm" style="height:20px;padding-top:initial;padding-bottom:initial;">ë§í•˜ê¸°</button>
                                {% else %}
                            ë§í•˜ëŠ” ì¤‘
                                {% endif %}
                            {% endif %}
                        {% elif gamer.game.ingameCd == 3 %}
                            {% if gamer.game.vote == 0 %}
                                {% if ready_gamer.vote == 1 %}
                        ë¼ì´ì–´
                                {% elif ready_gamer.vote == 2 %}
                        ì‚¬ê¸°ê¾¼
                                {% else %}
                        ì„ íƒì¤‘
                                {% endif %}
                            {% elif not gamer.game.targetusername %}
                                {% if ready_gamer.targetusername %}
                        ì„ íƒì™„ë£Œ
                                {% else %}
                        ì„ íƒì¤‘
                                {% endif %}
                            {% endif %}
                        {% elif gamer.game.ingameCd == 4 %}
                            {% if ready_gamer.user.username == liar.user.username %}
                        ë„ì£¼ì‹œë„
                            {% endif %}
                        {% endif %}
                    </td>
                    {% endif %}
                    {% if gamer.game.ingameCd > 1 and ready_gamers.0.speech1 %}
                    <td class="td6c" scope="row">
                        {% if ready_gamer.speech1 %}
                        <button type="button" onclick="saying('{{ ready_gamer.speech1 }}')" class="btn btn-outline-dark btn-sm" style="height:20px;padding-top:initial;padding-bottom:initial;">1</button>
                        {% endif %}
                        {% if ready_gamer.speech2 %}
                        <button type="button" onclick="saying('{{ ready_gamer.speech2 }}')" class="btn btn-outline-dark btn-sm" style="height:20px;padding-top:initial;padding-bottom:initial;">2</button>
                        {% endif %}
                    </td>
                    {% endif %}
                    {% if forloop.counter == 1 %}
                    <td class="td6c" scope="row" rowspan="{{ ready_gamers|length }}">
                        {% if gamer.game.ingameCd == 0 %}
                        {% elif gamer.game.ingameCd == 1 %}
                            {% if gamer.status == 1 and not gamer.categoryname %}
                                {% for category in categories %}
                        <button type="button" onclick="gamecategory('{{ category.categoryname }}')" class="btn btn-outline-success" style="height:25px;padding-top:initial;padding-bottom:initial;">{{ category.categoryname }}</button>
                                {% endfor %}
                            {% else %}
                                {% for player_category in player_categories %}
                        {{ player_category.0 }} : {{ player_category.1 }}<br>
                                {% endfor %}
                            {% endif %}
                        {% elif gamer.game.ingameCd != 5 %}
                            {% if gamer.status == 1 %}
                        <button type="button" onclick="info('{{ gamer.job }}')" class="btn btn-outline-success" style="height:25px;padding-top:initial;padding-bottom:initial;">ì •ë³´ í™•ì¸</button>
                            {% else %}
                        <button type="button" onclick="info('observer')" class="btn btn-outline-success" style="height:25px;padding-top:initial;padding-bottom:initial;">ì •ë³´ í™•ì¸</button>
                            {% endif %}
                            {% if gamer.game.ingameCd > 1 %}
                                {% if ready_gamers.0.speech1 %}
                        <br><br>
                        <button type="button" onclick="sayingall()" class="btn btn-outline-success" style="height:25px;padding-top:initial;padding-bottom:initial;">ë°œì–¸(ì „ì²´)</button>
                                {% endif %}
                            {% endif %}
                        {% elif gamer.game.ingameCd == 5 %}
                        <script type="text/javascript">
                        if(('{{ gamer.game.vote }}' == 0) || ('{{ gamer.game.vote }}' == 1 && '{{ gamer.game.liarkey }}' == '')) {
                            swal("ë¼ìš´ë“œ ì¢…ë£Œ~â›”", "by. ë§ˆìŠ¤í„° í”Œë ˆì´ì–´(" + '{{ gamer.game.master.username }}' + ")", {
                                buttons: false,
                                timer: 2000,
                            });
                        } else {
                            var target_job = 'ë¼ì´ì–´';
                            if('{{ gamer.game.vote }}' != 1) {
                                target_job = 'ì‚¬ê¸°ê¾¼';
                            }
                            swal( "íˆ¬í‘œ ê²°ê³¼(ëŒ€ìƒ:" + target_job + ")", ""
                            {% for ready_gamer in ready_gamers %}
                                 + "\n" + '{{ ready_gamer.user.username }}' + ": " + '{{ ready_gamer.targetusername }}'
                            {% endfor %}
                            ).then((response) => {
                                if('{{ gamer.game.winner }}' == "citizen") {
                                    if('{{ gamer.game.vote }}' == 1) {
                                        if('{{ gamer.game.liarlock }}' == 1) {
                                            swal("ì‹œë¯¼íŒ€ ìŠ¹~ğŸ§", "ë¼ì´ì–´ê°€ ì œì‹œì–´(" + '{{ liar.game.liarkey }}' + ")ë¡œ íƒˆì¶œ ì‹¤íŒ¨~ğŸš”", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        } else if('{{ gamer.game.liarlock }}' == 2) {
                                            swal("ì‹œë¯¼íŒ€ ìŠ¹~ğŸ§", "ë¬´ê³ í•œ ì‹œë¯¼(" + '{{ liar.game.liarkey }}' + ") ì‚¬ë§~ğŸ˜±", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        } else {
                                            swal("ì‹œë¯¼íŒ€ ìŠ¹~ğŸ§", "ë¼ì´ì–´ " + '{{ gamer.game.targetusername }}' + " ê²€ê±°~ğŸš”", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        }
                                    } else {
                                        swal("ì‹œë¯¼íŒ€ ìŠ¹~ğŸ§", "ì‚¬ê¸°ê¾¼ " + '{{ gamer.game.targetusername }}' + " ê²€ê±°~ğŸš”", {
                                            buttons: false,
                                            timer: 2000,
                                        });
                                    }
                                } else {
                                    if('{{ gamer.game.vote }}' == 1) {
                                        if('{{ gamer.game.targetusername }}' == '{{ liar.user.username }}') {
                                            if('{{ gamer.game.liarlock }}' == 1) {
                                                swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ‘»", "ë¼ì´ì–´ê°€ ì œì‹œì–´(" + '{{ liar.game.liarkey }}' + ")ë¡œ íƒˆì¶œ~ğŸ›«", {
                                                    buttons: false,
                                                    timer: 2000,
                                                });
                                            } else if('{{ gamer.game.liarlock }}' == 2) {
                                                swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ‘»", "ë°°ì‹ ì " + '{{ liar.game.liarkey }}' + " ì²˜ë‹¨~ğŸ˜µ by.ë¼ì´ì–´", {
                                                    buttons: false,
                                                    timer: 2000,
                                                });
                                            } else {
                                                swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ‘»", "ë¼ì´ì–´ ê²€ê±° ì‹¤íŒ¨~ğŸ˜", {
                                                    buttons: false,
                                                    timer: 2000,
                                                });
                                            }
                                        } else if('{{ gamer.game.targetusername }}' == 'TIE') {
                                            swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ‘»", "í˜¼ë€í•˜ë‹¤~í˜¼ë€í•´~ğŸ˜µâ€ğŸ’«", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        } else {
                                            swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ‘»", "ì–µìš¸í•œ ì‹œë¯¼ " + '{{ gamer.game.targetusername }}' + "~ğŸ˜¡", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        }
                                    } else {
                                        if('{{ gamer.game.targetusername }}' == '{{ liar.user.username }}') {
                                            swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ¶", "ë˜‘ë˜‘í•œ ë¼ì´ì–´ " + '{{ gamer.game.targetusername }}' + "~ğŸ˜¤", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        } else {
                                            swal("ë¼ì´ì–´íŒ€ ìŠ¹~ğŸ¶", "ì–µìš¸í•œ ì‹œë¯¼ " + '{{ gamer.game.targetusername }}' + "~ğŸ˜", {
                                                buttons: false,
                                                timer: 2000,
                                            });
                                        }
                                    }
                                }
                            });
                        }
                        </script>
                        ì¹´í…Œê³ ë¦¬: {{ gamer.game.categoryname }}<br>ì œì‹œì–´: {{ gamer.game.word }}
                            {% if ready_gamers.0.speech1 %}
                        <br><br>
                        <button type="button" onclick="sayingall()" class="btn btn-outline-success" style="height:25px;padding-top:initial;padding-bottom:initial;">ë°œì–¸(ì „ì²´)</button>
                            {% endif %}
                        {% endif %}
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</p><p>
    <div id="comment">
    {% if gamer.game.ingameCd == 3 %}
        {% if gamer.vote == 0 and gamer.status == 1 %}
        <table style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
                    <td class="tdh6c" scope="row">ê²€ê±° ëŒ€ìƒì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="td6c" scope="row">
                        <button type="button" onclick="whoistarget('trickster')" class="btn btn-warning btn-sm" style="height:25px;padding-top:initial;padding-bottom:initial;">ì‚¬ê¸°ê¾¼</button>
                        <button type="button" onclick="whoistarget('liar')" class="btn btn-danger btn-sm" style="height:25px;padding-top:initial;padding-bottom:initial;">ë¼ì´ì–´</button>
                    </td>
                </tr>
            </tbody>
        </table>
        {% elif not gamer.targetusername and gamer.game.vote != 0 and gamer.status == 1 %}
        <table style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
            {% if gamer.game.vote == 1 %}
                {% if ready_gamers|length > 4 %}
                    <td class="tdh6c" scope="row" colspan="4">ë¼ì´ì–´ëŠ” ëˆ„êµ¬ì¼ê¹Œìš”?</td>
                {% else %}
                    <td class="tdh6c" scope="row" colspan="{{ ready_gamers|length }}">ë¼ì´ì–´ëŠ” ëˆ„êµ¬ì¼ê¹Œìš”?</td>
                {% endif %}
            {% else %}
                {% if ready_gamers|length > 4 %}
                    <td class="tdh6c" scope="row" colspan="4">ì‚¬ê¸°ê¾¼ì€ ëˆ„êµ¬ì¼ê¹Œìš”?</td>
                {% else %}
                    <td class="tdh6c" scope="row" colspan="{{ ready_gamers|length }}">ì‚¬ê¸°ê¾¼ì€ ëˆ„êµ¬ì¼ê¹Œìš”?</td>
                {% endif %}
            {% endif %}
                </tr>
            </thead>
            <tbody>
                <tr>
            {% for target_gamer in ready_gamers %}
                    <td class="td6c" scope="row">
                        <button type="button" onclick="votetarget('{{ target_gamer.user.username }}')" class="btn btn-info" style="height:25px;padding-top:initial;padding-bottom:initial;">{{ target_gamer.user.username }}</button>
                    </td>
                {% if forloop.counter|divisibleby:4 != 0 %}
                        </tr><tr>
                {% endif %}
            {% endfor %}
                </tr>
            </tbody>
        </table>
        {% endif %}
    {% elif gamer.game.ingameCd == 4 %}
        {% if gamer.user.username == liar.user.username %}
            {% if gamer.game.whistleblowerYn and gamer.game.liarlock == 0 %}
        <table style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
                    <td class="tdh6c" scope="row">ë„ì£¼ë¥¼ ì‹œë„í•  ë°©ë²•ì€?</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="td6c" scope="row">
                        <button type="button" onclick="runawaylock('word')" class="btn btn-success btn-sm" style="height:25px;padding-top:initial;padding-bottom:initial;">ì œì‹œì–´</button>
                        <button type="button" onclick="runawaylock('whistleblower')" class="btn btn-danger btn-sm" style="height:25px;padding-top:initial;padding-bottom:initial;">ë°°ì‹ ì</button>
                    </td>
                </tr>
            </tbody>
        </table>
            {% elif gamer.game.liarlock == 2 %}
        <table style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
                {% if ready_gamers|length > 4 %}
                    <td class="tdh6c" scope="row" colspan="4">ë°°ì‹ ìëŠ” ëˆ„êµ¬ì¼ê¹Œìš”~ğŸ”«?</td>
                {% else %}
                    <td class="tdh6c" scope="row" colspan="{{ ready_gamers|length }}">ë°°ì‹ ìëŠ” ëˆ„êµ¬ì¼ê¹Œìš”~ğŸ”«?</td>
                {% endif %}
                </tr>
            </thead>
            <tbody>
                <tr>
                {% for target_gamer in ready_gamers %}
                    <td class="td6c" scope="row">
                        <button type="button" onclick="killtarget('{{ target_gamer.user.username }}')" class="btn btn-danger" style="height:25px;padding-top:initial;padding-bottom:initial;">{{ target_gamer.user.username }}</button>
                    </td>
                    {% if forloop.counter|divisibleby:4 != 0 %}
                        </tr><tr>
                    {% endif %}
                {% endfor %}
                </tr>
            </tbody>
        </table>
            {% else %}
        <table style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
                {% if words|length > 4 %}
                    <td class="tdh6c" scope="row" colspan="4">ì œì‹œì–´ëŠ” ë¬´ì—‡ì¼ê¹Œìš”~?</td>
                {% else %}
                    <td class="tdh6c" scope="row" colspan="{{ words|length }}">ì œì‹œì–´ëŠ” ë¬´ì—‡ì¼ê¹Œìš”~?</td>
                {% endif %}
                </tr>
            </thead>
            <tbody>
                <tr>
                {% for word in words %}
                    <td class="td6c" scope="row">
                        <button type="button" onclick="killword('{{ word.word }}')" class="btn btn-info" style="height:25px;padding-top:initial;padding-bottom:initial;">{{ word.word }}</button>
                    </td>
                    {% if forloop.counter|divisibleby:4 != 0 %}
                        </tr><tr>
                    {% endif %}
                {% endfor %}
                </tr>
            </tbody>
        </table>
            {% endif %}
        {% endif %}
    {% endif %}
    </div>
</p>
{% endif %}
</body>
</html>